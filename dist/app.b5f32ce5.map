{"version":3,"sources":["node_modules\\colorbrewer\\index.js","app.mjs"],"names":["years","countries","genres","checkCacheForYearsIntervals","missingYears","missing","existingYears","existing","length","loadScatterPlotDataFromDB","then","data","forEach","d","voteAverage","$numberDouble","popularity","releaseYear","parseInt","cachedData","readCache","concat","drawScatterPlot","writeCache","loadMapDataFromDB","drawMap","loadBarChartDataFromDB","drawBarChart","refreshPlots","removeOldElements","selection","selectAll","remove","exit","scatterPlot","d3","select","attr","svgWidth","svgHeight","append","text","xScale","scaleLinear","domain","extent","xDataSelector","range","padding","yScale","yDataSelector","xAxis","axisBottom","tickSize","tickSizeOuter","tickFormat","format","yAxis","axisLeft","colorScale","cDataSelector","rgb","radiusScale","rDataSelector","call","points","startYear","endYear","yearsText","yLabel","xLabel","addLabel","addNote","enter","merge","raise","tooltip","on","style","html","title","imgBaseUrl","posterPath","event","x","pageY","displayMovieInfo","id","handleMouseOver","handleMouseOut","coords","mouse","codeNumericToName","get","node","offsetWidth","document","getElementById","getBoundingClientRect","y","window","pageYOffset","geoData","topojson","feature","mapData","objects","features","countryCodeToMovieCount","Map","set","country","_id","count","Array","from","values","colorbrewer","Blues","projection","geoNaturalEarth1","scale","translate","path","geoPath","worldMap","defaultCountryFillColor","movieCount","codeNumericToLetter","countriesChosen","includes","target","yearsChosen","genresChosen","countryName","shiftKey","filter","entry","push","JSON","stringify","legendWidth","legendHeight","legend","ticks","getMovieDetails","movie","budget","toLocaleString","currency","slice","runTime","runtime","Math","floor","productionCountries","name","replace","rating","htmlString","imgBaseUrlLarge","overview","countryCodesObj","countryCodes","Object","require","initialMinYear","initialMaxYear","sliderLow","codeLetterToNumeric","cache","backEndUrlBase","onload","getListOfYearsFromDB","setUpNewSlider","min","max","init","requestURL","fetch","res","json","map","minYear","maxYear","$","slider","step","first","last","rest","keys","cachedMin","cachedMax","has","year","chunk","countriesString","genresString","credentials","letterCodes","barChart","genreToMovieCount","genre","genreData","entries","sort","a","b","barPadding","barWidth","bars","barLabels","paddingBottom","e","undefined","i","handleClick","genreName","labelText","noteText","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;sEC7OA;AAAA,QAA8BA,KAA9B,SAA8BA,KAA9B;AAAA,QAAqCC,SAArC,SAAqCA,SAArC;AAAA,QAAgDC,MAAhD,SAAgDA,MAAhD;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oCAIMC,4BAA4BH,KAA5B,CAJN,EAEaI,YAFb,yBAEIC,OAFJ,EAGcC,aAHd,yBAGIC,QAHJ;;AAKE,gBAAIH,aAAaI,MAAb,GAAsB,CAA1B,EAA6B;AAC3BC,wCAA0B,EAAET,OAAOI,YAAT,EAAuBH,oBAAvB,EAAkCC,cAAlC,EAA1B,EAAsEQ,IAAtE,CACE,gBAAQ;AACNC,qBAAKC,OAAL,CAAa,aAAK;AAChB,sBAAI,QAAOC,EAAEC,WAAT,MAAyB,QAA7B,EAAuC;AACrCD,sBAAEC,WAAF,GAAgB,CAACD,EAAEC,WAAF,CAAcC,aAA/B;AACD;AACD,sBAAI,QAAOF,EAAEG,UAAT,MAAwB,QAA5B,EAAsC;AACpCH,sBAAEG,UAAF,GAAe,CAACH,EAAEG,UAAF,CAAaD,aAA7B;AACD;AACDF,oBAAEI,WAAF,GAAgBC,SAASL,EAAEI,WAAX,EAAwB,EAAxB,CAAhB;AACD,iBARD;AASA;AACA,oBAAME,aAAaC,UAAUd,aAAV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","file":"app.b5f32ce5.map","sourceRoot":"..","sourcesContent":["// This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).\n// JavaScript specs as packaged in the D3 library (d3js.org). Please see license at http://colorbrewer.org/export/LICENSE.txt\n!function() {\n\nvar colorbrewer = {schemeGroups: {\nsequential: [\"BuGn\",\"BuPu\",\"GnBu\",\"OrRd\",\"PuBu\",\"PuBuGn\",\"PuRd\",\"RdPu\",\"YlGn\",\"YlGnBu\",\"YlOrBr\",\"YlOrRd\"],\nsinglehue:[\"Blues\",\"Greens\",\"Greys\",\"Oranges\",\"Purples\",\"Reds\"],\ndiverging: [\"BrBG\",\"PiYG\",\"PRGn\",\"PuOr\",\"RdBu\",\"RdGy\",\"RdYlBu\",\"RdYlGn\",\"Spectral\"],\nqualitative: [\"Accent\",\"Dark2\",\"Paired\",\"Pastel1\",\"Pastel2\",\"Set1\",\"Set2\",\"Set3\"]\n}, YlGn: {\n3: [\"#f7fcb9\",\"#addd8e\",\"#31a354\"],\n4: [\"#ffffcc\",\"#c2e699\",\"#78c679\",\"#238443\"],\n5: [\"#ffffcc\",\"#c2e699\",\"#78c679\",\"#31a354\",\"#006837\"],\n6: [\"#ffffcc\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#31a354\",\"#006837\"],\n7: [\"#ffffcc\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#005a32\"],\n8: [\"#ffffe5\",\"#f7fcb9\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#005a32\"],\n9: [\"#ffffe5\",\"#f7fcb9\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#006837\",\"#004529\"]\n},YlGnBu: {\n3: [\"#edf8b1\",\"#7fcdbb\",\"#2c7fb8\"],\n4: [\"#ffffcc\",\"#a1dab4\",\"#41b6c4\",\"#225ea8\"],\n5: [\"#ffffcc\",\"#a1dab4\",\"#41b6c4\",\"#2c7fb8\",\"#253494\"],\n6: [\"#ffffcc\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#2c7fb8\",\"#253494\"],\n7: [\"#ffffcc\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#0c2c84\"],\n8: [\"#ffffd9\",\"#edf8b1\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#0c2c84\"],\n9: [\"#ffffd9\",\"#edf8b1\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#253494\",\"#081d58\"]\n},GnBu: {\n3: [\"#e0f3db\",\"#a8ddb5\",\"#43a2ca\"],\n4: [\"#f0f9e8\",\"#bae4bc\",\"#7bccc4\",\"#2b8cbe\"],\n5: [\"#f0f9e8\",\"#bae4bc\",\"#7bccc4\",\"#43a2ca\",\"#0868ac\"],\n6: [\"#f0f9e8\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#43a2ca\",\"#0868ac\"],\n7: [\"#f0f9e8\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#08589e\"],\n8: [\"#f7fcf0\",\"#e0f3db\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#08589e\"],\n9: [\"#f7fcf0\",\"#e0f3db\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#0868ac\",\"#084081\"]\n},BuGn: {\n3: [\"#e5f5f9\",\"#99d8c9\",\"#2ca25f\"],\n4: [\"#edf8fb\",\"#b2e2e2\",\"#66c2a4\",\"#238b45\"],\n5: [\"#edf8fb\",\"#b2e2e2\",\"#66c2a4\",\"#2ca25f\",\"#006d2c\"],\n6: [\"#edf8fb\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#2ca25f\",\"#006d2c\"],\n7: [\"#edf8fb\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#005824\"],\n8: [\"#f7fcfd\",\"#e5f5f9\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#005824\"],\n9: [\"#f7fcfd\",\"#e5f5f9\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#006d2c\",\"#00441b\"]\n},PuBuGn: {\n3: [\"#ece2f0\",\"#a6bddb\",\"#1c9099\"],\n4: [\"#f6eff7\",\"#bdc9e1\",\"#67a9cf\",\"#02818a\"],\n5: [\"#f6eff7\",\"#bdc9e1\",\"#67a9cf\",\"#1c9099\",\"#016c59\"],\n6: [\"#f6eff7\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#1c9099\",\"#016c59\"],\n7: [\"#f6eff7\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016450\"],\n8: [\"#fff7fb\",\"#ece2f0\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016450\"],\n9: [\"#fff7fb\",\"#ece2f0\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016c59\",\"#014636\"]\n},PuBu: {\n3: [\"#ece7f2\",\"#a6bddb\",\"#2b8cbe\"],\n4: [\"#f1eef6\",\"#bdc9e1\",\"#74a9cf\",\"#0570b0\"],\n5: [\"#f1eef6\",\"#bdc9e1\",\"#74a9cf\",\"#2b8cbe\",\"#045a8d\"],\n6: [\"#f1eef6\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#2b8cbe\",\"#045a8d\"],\n7: [\"#f1eef6\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#034e7b\"],\n8: [\"#fff7fb\",\"#ece7f2\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#034e7b\"],\n9: [\"#fff7fb\",\"#ece7f2\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#045a8d\",\"#023858\"]\n},BuPu: {\n3: [\"#e0ecf4\",\"#9ebcda\",\"#8856a7\"],\n4: [\"#edf8fb\",\"#b3cde3\",\"#8c96c6\",\"#88419d\"],\n5: [\"#edf8fb\",\"#b3cde3\",\"#8c96c6\",\"#8856a7\",\"#810f7c\"],\n6: [\"#edf8fb\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8856a7\",\"#810f7c\"],\n7: [\"#edf8fb\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#6e016b\"],\n8: [\"#f7fcfd\",\"#e0ecf4\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#6e016b\"],\n9: [\"#f7fcfd\",\"#e0ecf4\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#810f7c\",\"#4d004b\"]\n},RdPu: {\n3: [\"#fde0dd\",\"#fa9fb5\",\"#c51b8a\"],\n4: [\"#feebe2\",\"#fbb4b9\",\"#f768a1\",\"#ae017e\"],\n5: [\"#feebe2\",\"#fbb4b9\",\"#f768a1\",\"#c51b8a\",\"#7a0177\"],\n6: [\"#feebe2\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#c51b8a\",\"#7a0177\"],\n7: [\"#feebe2\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\"],\n8: [\"#fff7f3\",\"#fde0dd\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\"],\n9: [\"#fff7f3\",\"#fde0dd\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\",\"#49006a\"]\n},PuRd: {\n3: [\"#e7e1ef\",\"#c994c7\",\"#dd1c77\"],\n4: [\"#f1eef6\",\"#d7b5d8\",\"#df65b0\",\"#ce1256\"],\n5: [\"#f1eef6\",\"#d7b5d8\",\"#df65b0\",\"#dd1c77\",\"#980043\"],\n6: [\"#f1eef6\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#dd1c77\",\"#980043\"],\n7: [\"#f1eef6\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#91003f\"],\n8: [\"#f7f4f9\",\"#e7e1ef\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#91003f\"],\n9: [\"#f7f4f9\",\"#e7e1ef\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#980043\",\"#67001f\"]\n},OrRd: {\n3: [\"#fee8c8\",\"#fdbb84\",\"#e34a33\"],\n4: [\"#fef0d9\",\"#fdcc8a\",\"#fc8d59\",\"#d7301f\"],\n5: [\"#fef0d9\",\"#fdcc8a\",\"#fc8d59\",\"#e34a33\",\"#b30000\"],\n6: [\"#fef0d9\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#e34a33\",\"#b30000\"],\n7: [\"#fef0d9\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#990000\"],\n8: [\"#fff7ec\",\"#fee8c8\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#990000\"],\n9: [\"#fff7ec\",\"#fee8c8\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#b30000\",\"#7f0000\"]\n},YlOrRd: {\n3: [\"#ffeda0\",\"#feb24c\",\"#f03b20\"],\n4: [\"#ffffb2\",\"#fecc5c\",\"#fd8d3c\",\"#e31a1c\"],\n5: [\"#ffffb2\",\"#fecc5c\",\"#fd8d3c\",\"#f03b20\",\"#bd0026\"],\n6: [\"#ffffb2\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#f03b20\",\"#bd0026\"],\n7: [\"#ffffb2\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#b10026\"],\n8: [\"#ffffcc\",\"#ffeda0\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#b10026\"],\n9: [\"#ffffcc\",\"#ffeda0\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#bd0026\",\"#800026\"]\n},YlOrBr: {\n3: [\"#fff7bc\",\"#fec44f\",\"#d95f0e\"],\n4: [\"#ffffd4\",\"#fed98e\",\"#fe9929\",\"#cc4c02\"],\n5: [\"#ffffd4\",\"#fed98e\",\"#fe9929\",\"#d95f0e\",\"#993404\"],\n6: [\"#ffffd4\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#d95f0e\",\"#993404\"],\n7: [\"#ffffd4\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#8c2d04\"],\n8: [\"#ffffe5\",\"#fff7bc\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#8c2d04\"],\n9: [\"#ffffe5\",\"#fff7bc\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#993404\",\"#662506\"]\n},Purples: {\n3: [\"#efedf5\",\"#bcbddc\",\"#756bb1\"],\n4: [\"#f2f0f7\",\"#cbc9e2\",\"#9e9ac8\",\"#6a51a3\"],\n5: [\"#f2f0f7\",\"#cbc9e2\",\"#9e9ac8\",\"#756bb1\",\"#54278f\"],\n6: [\"#f2f0f7\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#756bb1\",\"#54278f\"],\n7: [\"#f2f0f7\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#4a1486\"],\n8: [\"#fcfbfd\",\"#efedf5\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#4a1486\"],\n9: [\"#fcfbfd\",\"#efedf5\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#54278f\",\"#3f007d\"]\n},Blues: {\n3: [\"#deebf7\",\"#9ecae1\",\"#3182bd\"],\n4: [\"#eff3ff\",\"#bdd7e7\",\"#6baed6\",\"#2171b5\"],\n5: [\"#eff3ff\",\"#bdd7e7\",\"#6baed6\",\"#3182bd\",\"#08519c\"],\n6: [\"#eff3ff\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#3182bd\",\"#08519c\"],\n7: [\"#eff3ff\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#084594\"],\n8: [\"#f7fbff\",\"#deebf7\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#084594\"],\n9: [\"#f7fbff\",\"#deebf7\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#08519c\",\"#08306b\"]\n},Greens: {\n3: [\"#e5f5e0\",\"#a1d99b\",\"#31a354\"],\n4: [\"#edf8e9\",\"#bae4b3\",\"#74c476\",\"#238b45\"],\n5: [\"#edf8e9\",\"#bae4b3\",\"#74c476\",\"#31a354\",\"#006d2c\"],\n6: [\"#edf8e9\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#31a354\",\"#006d2c\"],\n7: [\"#edf8e9\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#005a32\"],\n8: [\"#f7fcf5\",\"#e5f5e0\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#005a32\"],\n9: [\"#f7fcf5\",\"#e5f5e0\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#006d2c\",\"#00441b\"]\n},Oranges: {\n3: [\"#fee6ce\",\"#fdae6b\",\"#e6550d\"],\n4: [\"#feedde\",\"#fdbe85\",\"#fd8d3c\",\"#d94701\"],\n5: [\"#feedde\",\"#fdbe85\",\"#fd8d3c\",\"#e6550d\",\"#a63603\"],\n6: [\"#feedde\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#e6550d\",\"#a63603\"],\n7: [\"#feedde\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#8c2d04\"],\n8: [\"#fff5eb\",\"#fee6ce\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#8c2d04\"],\n9: [\"#fff5eb\",\"#fee6ce\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#a63603\",\"#7f2704\"]\n},Reds: {\n3: [\"#fee0d2\",\"#fc9272\",\"#de2d26\"],\n4: [\"#fee5d9\",\"#fcae91\",\"#fb6a4a\",\"#cb181d\"],\n5: [\"#fee5d9\",\"#fcae91\",\"#fb6a4a\",\"#de2d26\",\"#a50f15\"],\n6: [\"#fee5d9\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#de2d26\",\"#a50f15\"],\n7: [\"#fee5d9\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#99000d\"],\n8: [\"#fff5f0\",\"#fee0d2\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#99000d\"],\n9: [\"#fff5f0\",\"#fee0d2\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#a50f15\",\"#67000d\"]\n},Greys: {\n3: [\"#f0f0f0\",\"#bdbdbd\",\"#636363\"],\n4: [\"#f7f7f7\",\"#cccccc\",\"#969696\",\"#525252\"],\n5: [\"#f7f7f7\",\"#cccccc\",\"#969696\",\"#636363\",\"#252525\"],\n6: [\"#f7f7f7\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#636363\",\"#252525\"],\n7: [\"#f7f7f7\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\"],\n8: [\"#ffffff\",\"#f0f0f0\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\"],\n9: [\"#ffffff\",\"#f0f0f0\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\",\"#000000\"]\n},PuOr: {\n3: [\"#f1a340\",\"#f7f7f7\",\"#998ec3\"],\n4: [\"#e66101\",\"#fdb863\",\"#b2abd2\",\"#5e3c99\"],\n5: [\"#e66101\",\"#fdb863\",\"#f7f7f7\",\"#b2abd2\",\"#5e3c99\"],\n6: [\"#b35806\",\"#f1a340\",\"#fee0b6\",\"#d8daeb\",\"#998ec3\",\"#542788\"],\n7: [\"#b35806\",\"#f1a340\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#998ec3\",\"#542788\"],\n8: [\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\"],\n9: [\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\"],\n10: [\"#7f3b08\",\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\",\"#2d004b\"],\n11: [\"#7f3b08\",\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\",\"#2d004b\"]\n},BrBG: {\n3: [\"#d8b365\",\"#f5f5f5\",\"#5ab4ac\"],\n4: [\"#a6611a\",\"#dfc27d\",\"#80cdc1\",\"#018571\"],\n5: [\"#a6611a\",\"#dfc27d\",\"#f5f5f5\",\"#80cdc1\",\"#018571\"],\n6: [\"#8c510a\",\"#d8b365\",\"#f6e8c3\",\"#c7eae5\",\"#5ab4ac\",\"#01665e\"],\n7: [\"#8c510a\",\"#d8b365\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#5ab4ac\",\"#01665e\"],\n8: [\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\"],\n9: [\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\"],\n10: [\"#543005\",\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\",\"#003c30\"],\n11: [\"#543005\",\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\",\"#003c30\"]\n},PRGn: {\n3: [\"#af8dc3\",\"#f7f7f7\",\"#7fbf7b\"],\n4: [\"#7b3294\",\"#c2a5cf\",\"#a6dba0\",\"#008837\"],\n5: [\"#7b3294\",\"#c2a5cf\",\"#f7f7f7\",\"#a6dba0\",\"#008837\"],\n6: [\"#762a83\",\"#af8dc3\",\"#e7d4e8\",\"#d9f0d3\",\"#7fbf7b\",\"#1b7837\"],\n7: [\"#762a83\",\"#af8dc3\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#7fbf7b\",\"#1b7837\"],\n8: [\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\"],\n9: [\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\"],\n10: [\"#40004b\",\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\",\"#00441b\"],\n11: [\"#40004b\",\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\",\"#00441b\"]\n},PiYG: {\n3: [\"#e9a3c9\",\"#f7f7f7\",\"#a1d76a\"],\n4: [\"#d01c8b\",\"#f1b6da\",\"#b8e186\",\"#4dac26\"],\n5: [\"#d01c8b\",\"#f1b6da\",\"#f7f7f7\",\"#b8e186\",\"#4dac26\"],\n6: [\"#c51b7d\",\"#e9a3c9\",\"#fde0ef\",\"#e6f5d0\",\"#a1d76a\",\"#4d9221\"],\n7: [\"#c51b7d\",\"#e9a3c9\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#a1d76a\",\"#4d9221\"],\n8: [\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\"],\n9: [\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\"],\n10: [\"#8e0152\",\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\",\"#276419\"],\n11: [\"#8e0152\",\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\",\"#276419\"]\n},RdBu: {\n3: [\"#ef8a62\",\"#f7f7f7\",\"#67a9cf\"],\n4: [\"#ca0020\",\"#f4a582\",\"#92c5de\",\"#0571b0\"],\n5: [\"#ca0020\",\"#f4a582\",\"#f7f7f7\",\"#92c5de\",\"#0571b0\"],\n6: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#d1e5f0\",\"#67a9cf\",\"#2166ac\"],\n7: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#67a9cf\",\"#2166ac\"],\n8: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\"],\n9: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\"],\n10: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"],\n11: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"]\n},RdGy: {\n3: [\"#ef8a62\",\"#ffffff\",\"#999999\"],\n4: [\"#ca0020\",\"#f4a582\",\"#bababa\",\"#404040\"],\n5: [\"#ca0020\",\"#f4a582\",\"#ffffff\",\"#bababa\",\"#404040\"],\n6: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#e0e0e0\",\"#999999\",\"#4d4d4d\"],\n7: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#999999\",\"#4d4d4d\"],\n8: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\"],\n9: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\"],\n10: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\",\"#1a1a1a\"],\n11: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\",\"#1a1a1a\"]\n},RdYlBu: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#91bfdb\"],\n4: [\"#d7191c\",\"#fdae61\",\"#abd9e9\",\"#2c7bb6\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#abd9e9\",\"#2c7bb6\"],\n6: [\"#d73027\",\"#fc8d59\",\"#fee090\",\"#e0f3f8\",\"#91bfdb\",\"#4575b4\"],\n7: [\"#d73027\",\"#fc8d59\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#91bfdb\",\"#4575b4\"],\n8: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\"],\n9: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\"],\n10: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\",\"#313695\"],\n11: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\",\"#313695\"]\n},Spectral: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#99d594\"],\n4: [\"#d7191c\",\"#fdae61\",\"#abdda4\",\"#2b83ba\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#abdda4\",\"#2b83ba\"],\n6: [\"#d53e4f\",\"#fc8d59\",\"#fee08b\",\"#e6f598\",\"#99d594\",\"#3288bd\"],\n7: [\"#d53e4f\",\"#fc8d59\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#99d594\",\"#3288bd\"],\n8: [\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\"],\n9: [\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\"],\n10: [\"#9e0142\",\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\",\"#5e4fa2\"],\n11: [\"#9e0142\",\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\",\"#5e4fa2\"]\n},RdYlGn: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#91cf60\"],\n4: [\"#d7191c\",\"#fdae61\",\"#a6d96a\",\"#1a9641\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#a6d96a\",\"#1a9641\"],\n6: [\"#d73027\",\"#fc8d59\",\"#fee08b\",\"#d9ef8b\",\"#91cf60\",\"#1a9850\"],\n7: [\"#d73027\",\"#fc8d59\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#91cf60\",\"#1a9850\"],\n8: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\"],\n9: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\"],\n10: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\",\"#006837\"],\n11: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\",\"#006837\"]\n},Accent: {\n3: [\"#7fc97f\",\"#beaed4\",\"#fdc086\"],\n4: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\"],\n5: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\"],\n6: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\"],\n7: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\",\"#bf5b17\"],\n8: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\",\"#bf5b17\",\"#666666\"]\n},Dark2: {\n3: [\"#1b9e77\",\"#d95f02\",\"#7570b3\"],\n4: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\"],\n5: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\"],\n6: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\"],\n7: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\",\"#a6761d\"],\n8: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\",\"#a6761d\",\"#666666\"]\n},Paired: {\n3: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\"],\n4: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\"],\n5: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\"],\n6: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\"],\n7: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\"],\n8: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\"],\n9: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\"],\n10: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\"],\n11: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#ffff99\"],\n12: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#ffff99\",\"#b15928\"]\n},Pastel1: {\n3: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\"],\n4: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\"],\n5: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\"],\n6: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\"],\n7: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\"],\n8: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\",\"#fddaec\"],\n9: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\",\"#fddaec\",\"#f2f2f2\"]\n},Pastel2: {\n3: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\"],\n4: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\"],\n5: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\"],\n6: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\"],\n7: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\",\"#f1e2cc\"],\n8: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\",\"#f1e2cc\",\"#cccccc\"]\n},Set1: {\n3: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\"],\n4: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\"],\n5: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\"],\n6: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\"],\n7: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\"],\n8: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\",\"#f781bf\"],\n9: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\",\"#f781bf\",\"#999999\"]\n},Set2: {\n3: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\"],\n4: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\"],\n5: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\"],\n6: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\"],\n7: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\",\"#e5c494\"],\n8: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\",\"#e5c494\",\"#b3b3b3\"]\n},Set3: {\n3: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\"],\n4: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\"],\n5: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\"],\n6: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\"],\n7: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\"],\n8: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\"],\n9: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\"],\n10: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\"],\n11: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\",\"#ccebc5\"],\n12: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\",\"#ccebc5\",\"#ffed6f\"]\n}};\n\nif (typeof define === \"function\" && define.amd) {\n    define(colorbrewer);\n} else if (typeof module === \"object\" && module.exports) {\n    module.exports = colorbrewer;\n} else {\n    this.colorbrewer = colorbrewer;\n}\n\n}();\n","import * as countryCodesObj from \"./countryCodes.json\";\r\nimport * as mapData from \"./mapData.json\";\r\n\r\nconst countryCodes = Object.values(countryCodesObj);\r\n\r\nconst colorbrewer = require(\"colorbrewer\");\r\n\r\nconst svgWidth = 600;\r\nconst svgHeight = 400;\r\nconst padding = 40;\r\nconst initialMinYear = 1950;\r\nconst initialMaxYear = 1960;\r\nconst sliderLow = 1900;\r\nlet yearsChosen = [initialMinYear, initialMaxYear];\r\nlet countriesChosen = [];\r\nlet genresChosen = [];\r\n\r\nlet colorScale;\r\nconst xDataSelector = \"budget\";\r\nconst yDataSelector = \"voteAverage\";\r\nconst rDataSelector = \"popularity\";\r\nconst cDataSelector = \"runtime\";\r\nconst xLabel = \"Movie budget\";\r\nconst yLabel = \"Viewer rating\";\r\nconst codeLetterToNumeric = new Map();\r\nconst codeNumericToLetter = new Map();\r\nconst codeNumericToName = new Map();\r\nconst cache = new Map();\r\nwindow.cache = cache;\r\n\r\nconst imgBaseUrl = \"https://image.tmdb.org/t/p/w154/\";\r\nconst imgBaseUrlLarge = \"https://image.tmdb.org/t/p/w185/\";\r\n\r\n// const backEndUrlBase = \"https://localhost:3000\";\r\nconst backEndUrlBase = \"https://levkaratun.com:3000\";\r\n\r\nwindow.onload = async function init() {\r\n  getListOfYearsFromDB().then(years => {\r\n    setUpNewSlider(d3.min(years), d3.max(years));\r\n  });\r\n\r\n  countryCodes.forEach(d => {\r\n    codeLetterToNumeric.set(d[\"alpha-2\"], d[\"country-code\"]);\r\n    codeNumericToLetter.set(d[\"country-code\"], d[\"alpha-2\"]);\r\n    codeNumericToName.set(d[\"country-code\"], d.name);\r\n  });\r\n\r\n  refreshPlots({\r\n    years: [initialMinYear, initialMaxYear],\r\n    countries: countriesChosen,\r\n    genres: genresChosen\r\n  });\r\n};\r\n\r\nfunction getListOfYearsFromDB() {\r\n  const requestURL = `${backEndUrlBase}/years`;\r\n  return fetch(requestURL)\r\n    .then(res => res.json())\r\n    .then(years => years.map(d => +d));\r\n}\r\n\r\nfunction setUpNewSlider(minYear, maxYear) {\r\n  $(\"#scale-slider\")\r\n    .slider({\r\n      max: maxYear,\r\n      min: sliderLow,\r\n      values: [initialMinYear, initialMaxYear],\r\n      range: true,\r\n      step: 1\r\n    })\r\n    .slider(\"pips\", {\r\n      first: true,\r\n      last: true,\r\n      rest: \"label\",\r\n      step: 1\r\n    });\r\n  $(\"#scale-slider\").on(\"slidechange\", () => {\r\n    const years = $(\"#scale-slider\").slider(\"option\", \"values\");\r\n    yearsChosen = years;\r\n    refreshPlots({ years, countries: countriesChosen, genres: genresChosen });\r\n  });\r\n}\r\n\r\nasync function refreshPlots({ years, countries, genres }) {\r\n  const {\r\n    missing: missingYears,\r\n    existing: existingYears\r\n  } = checkCacheForYearsIntervals(years);\r\n  if (missingYears.length > 0) {\r\n    loadScatterPlotDataFromDB({ years: missingYears, countries, genres }).then(\r\n      data => {\r\n        data.forEach(d => {\r\n          if (typeof d.voteAverage === \"object\") {\r\n            d.voteAverage = +d.voteAverage.$numberDouble;\r\n          }\r\n          if (typeof d.popularity === \"object\") {\r\n            d.popularity = +d.popularity.$numberDouble;\r\n          }\r\n          d.releaseYear = parseInt(d.releaseYear, 10);\r\n        });\r\n        // merge data from db and from cache\r\n        const cachedData = readCache(existingYears);\r\n        data = data.concat(cachedData);\r\n        drawScatterPlot({ data, years });\r\n        writeCache(missingYears, data);\r\n      }\r\n    );\r\n  } else {\r\n    drawScatterPlot({ data: readCache(existingYears, \"scatterPlot\"), years });\r\n  }\r\n\r\n  loadMapDataFromDB({ years, genres }).then(data => {\r\n    drawMap({ data });\r\n  });\r\n  loadBarChartDataFromDB({ years, countries }).then(data => {\r\n    drawBarChart({ data });\r\n  });\r\n}\r\nfunction checkCacheForYearsIntervals(years) {\r\n  const [minYear, maxYear] = years;\r\n  // We can assume that the range of cached years has to be contiguous\r\n  // since both sliders can't be moved at the same time\r\n  const [cachedMin, cachedMax] = d3.extent(Array.from(cache.keys()));\r\n  if (cache.has(minYear)) {\r\n    if (cache.has(maxYear))\r\n      return { missing: [], existing: [minYear, maxYear] };\r\n    return {\r\n      missing: [cachedMax + 1, maxYear],\r\n      existing: [minYear, cachedMax]\r\n    };\r\n  }\r\n  if (cache.has(maxYear))\r\n    return {\r\n      missing: [minYear, cachedMin - 1],\r\n      existing: [cachedMin, maxYear]\r\n    };\r\n  return { missing: [minYear, maxYear], existing: [] };\r\n}\r\n\r\nfunction readCache(years) {\r\n  const [minYear, maxYear] = years;\r\n  let res = [];\r\n  for (let year = minYear; year <= maxYear; year++) {\r\n    const chunk = cache.get(year);\r\n    res = res.concat(chunk);\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction writeCache(years, data) {\r\n  const [minYear, maxYear] = years;\r\n  // Need to have year for each record\r\n\r\n  // Loop over each entry in data and put it in cache\r\n  data.forEach(entry => {\r\n    const year = entry[\"releaseYear\"];\r\n\r\n    if (cache.has(year)) {\r\n      cache.get(year).push(entry);\r\n    } else {\r\n      cache.set(year, [entry]);\r\n    }\r\n  });\r\n\r\n  // Mark empty years with undefined's\r\n  for (let year = minYear; year <= maxYear; year++) {\r\n    if (!cache.has(year)) cache.set(year, []);\r\n  }\r\n}\r\n\r\nfunction loadScatterPlotDataFromDB({ years, countries, genres }) {\r\n  const [startYear, endYear] = years;\r\n  const countriesString = countries.length ? JSON.stringify(countries) : null;\r\n  const genresString = genres.length ? JSON.stringify(genres) : null;\r\n  const requestURL = `${backEndUrlBase}/getScatterPlotData/${countriesString}/${genresString}/${startYear}-${endYear}`;\r\n  return fetch(requestURL, { credentials: \"include\" }).then(res => res.json());\r\n}\r\n\r\nfunction loadMapDataFromDB({ years, genres }) {\r\n  const [startYear, endYear] = years;\r\n  const genresString = genres.length ? JSON.stringify(genres) : null;\r\n  const requestURL = `${backEndUrlBase}/getMapData/${genresString}/${startYear}-${endYear}`;\r\n  return fetch(requestURL, { credentials: \"include\" }).then(res => res.json());\r\n}\r\n\r\nfunction loadBarChartDataFromDB({ years, countries }) {\r\n  const [startYear, endYear] = years;\r\n  const letterCodes = countries.length ? JSON.stringify(countries) : null;\r\n  const requestURL = `${backEndUrlBase}/getBarChartData/${letterCodes}/${startYear}-${endYear}`;\r\n  return fetch(requestURL, { credentials: \"include\" }).then(res => res.json());\r\n}\r\n\r\nfunction getMovieDetails(id) {\r\n  const requestURL = `${backEndUrlBase}/getMovieById/${id}`;\r\n  return fetch(requestURL, { credentials: \"include\" }).then(res => res.json());\r\n}\r\n\r\nasync function drawScatterPlot({ data, years }) {\r\n  const scatterPlot = d3\r\n    .select(\"#scatterPlot\")\r\n    .attr(\"width\", svgWidth)\r\n    .attr(\"height\", svgHeight);\r\n\r\n  if (data.length === 0) {\r\n    removeOldElements(scatterPlot);\r\n    scatterPlot\r\n      .append(\"text\")\r\n      .attr(\"class\", \"placeholder\")\r\n      .text(\"No data points to display\")\r\n      .attr(\"x\", svgWidth / 2)\r\n      .attr(\"y\", svgHeight / 2)\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"font-weight\", 700);\r\n    return;\r\n  }\r\n\r\n  const xScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, d => d[xDataSelector]))\r\n    .range([padding, svgWidth - padding]);\r\n  const yScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, d => d[yDataSelector]))\r\n    .range([svgHeight - padding, padding]);\r\n  const xAxis = d3\r\n    .axisBottom(xScale)\r\n    .tickSize(-svgHeight + 2 * padding)\r\n    .tickSizeOuter(0)\r\n    .tickFormat(d => d3.format(\".1s\")(d));\r\n  const yAxis = d3\r\n    .axisLeft(yScale)\r\n    .tickSize(-svgWidth + 2 * padding)\r\n    .tickSizeOuter(0);\r\n  colorScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, d => d[cDataSelector]))\r\n    .range([d3.rgb(\"#66ff33\"), d3.rgb(\"#cc0000\")]);\r\n  const radiusScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, d => d[rDataSelector]))\r\n    .range([3, 12]);\r\n\r\n  removeOldElements(scatterPlot);\r\n\r\n  // Draw axes\r\n  scatterPlot\r\n    .append(\"g\")\r\n    .call(xAxis)\r\n    .attr(\"transform\", `translate (0, ${svgHeight - padding})`);\r\n  scatterPlot\r\n    .append(\"g\")\r\n    .call(yAxis)\r\n    .attr(\"transform\", `translate (${padding}, 0)`);\r\n\r\n  const points = scatterPlot.selectAll(\"circle\").data(data); // , d => d.id);\r\n\r\n  const [startYear, endYear] = years;\r\n  const yearsText =\r\n    startYear === endYear\r\n      ? `${yLabel} vs ${xLabel} (${startYear})`\r\n      : `${yLabel} vs ${xLabel} (${startYear} - ${endYear})`;\r\n\r\n  addLabel(scatterPlot, yearsText);\r\n  addNote(scatterPlot, \"(click a circle to see detailed movie info)\");\r\n\r\n  // Axes labels\r\n  // X axis\r\n  scatterPlot\r\n    .append(\"text\")\r\n    .text(`${xLabel}. Circle size represents popularity`)\r\n    .attr(\"x\", svgWidth / 2)\r\n    .attr(\"y\", svgHeight - padding)\r\n    .attr(\"dy\", \"2em\")\r\n    .attr(\"font-size\", \"1em\")\r\n    .attr(\"text-anchor\", \"middle\");\r\n\r\n  // Y axis\r\n  scatterPlot\r\n    .append(\"text\")\r\n    .text(yLabel)\r\n    .attr(\"transform\", \"rotate(-90)\")\r\n    .attr(\"x\", -svgHeight / 2)\r\n    .attr(\"y\", 0)\r\n    .attr(\"dy\", \"0.7em\")\r\n    .attr(\"font-size\", \"1em\")\r\n    .attr(\"text-anchor\", \"middle\");\r\n\r\n  // Data points\r\n  points\r\n    .enter()\r\n    .append(\"circle\")\r\n    .merge(points)\r\n    .attr(\"cx\", d => (d[xDataSelector] ? xScale(d[xDataSelector]) : padding))\r\n    .attr(\r\n      \"cy\",\r\n      d => (d[yDataSelector] ? yScale(d[yDataSelector]) : svgHeight - padding)\r\n    )\r\n    .attr(\"fill\", \"#444444\")\r\n    .attr(\"r\", d => radiusScale(d[rDataSelector]));\r\n\r\n  points.raise();\r\n\r\n  // tooltips\r\n  const tooltip = d3.select(\".tooltip\");\r\n  scatterPlot\r\n    .selectAll(\"circle\")\r\n    .on(\"mousemove\", d => {\r\n      tooltip\r\n        // .style(\"opacity\", 1)\r\n        .style(\"display\", \"block\")\r\n        .html(\r\n          `<b style=\"display: block\">${d.title}</b>\r\n        <img style=\"display: block\" src=\"${imgBaseUrl +\r\n          d.posterPath}\" alt=\"\" />`\r\n        )\r\n        .style(\r\n          \"left\",\r\n          `${d3.event.x /* - tooltip.node().offsetWidth/2 */ + 5}px`\r\n        )\r\n        .style(\"top\", `${d3.event.pageY}px`);\r\n    })\r\n    // .on(\"mouseout\", () => tooltip.style(\"opacity\", 0));\r\n    .on(\"mouseout\", () => tooltip.style(\"display\", \"none\"));\r\n\r\n  // Show movie info on circle click\r\n  scatterPlot.selectAll(\"circle\").on(\"click\", d => displayMovieInfo(d.id));\r\n\r\n  function removeOldElements(selection) {\r\n    selection.selectAll(\"g\").remove();\r\n    selection.selectAll(\"text\").remove();\r\n    selection\r\n      .selectAll(\"circle\")\r\n      .data(data) // , d => d.id)\r\n      .exit()\r\n      .remove();\r\n  }\r\n} // DrawScatterPlot\r\n\r\nasync function drawMap({ data }) {\r\n  // const worldMap = d3.select(\"#worldMap\");\r\n  const geoData = topojson.feature(mapData, mapData.objects.countries).features;\r\n\r\n  const countryCodeToMovieCount = new Map();\r\n  data.forEach(country =>\r\n    countryCodeToMovieCount.set(country._id, country.count)\r\n  );\r\n\r\n  colorScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(Array.from(countryCodeToMovieCount.values())))\r\n    .range([colorbrewer.Blues[5][0], colorbrewer.Blues[5][4]]);\r\n\r\n  const projection = d3\r\n    .geoNaturalEarth1()\r\n    .scale(140)\r\n    .translate([svgWidth * 0.47, svgHeight * 0.58]);\r\n\r\n  const path = d3.geoPath().projection(projection);\r\n\r\n  const worldMap = d3\r\n    .select(\"#worldMap\")\r\n    .attr(\"width\", svgWidth)\r\n    .attr(\"height\", svgHeight)\r\n    .selectAll(\".country\")\r\n    .data(geoData);\r\n\r\n  worldMap.exit().remove();\r\n\r\n  const defaultCountryFillColor = \"#DDDDDD\";\r\n\r\n  worldMap\r\n    .enter()\r\n    .append(\"path\")\r\n    .attr(\"class\", \"country\")\r\n    .merge(worldMap)\r\n    .attr(\"d\", path)\r\n    .attr(\"fill\", d => {\r\n      const movieCount = countryCodeToMovieCount.get(\r\n        codeNumericToLetter.get(d.id)\r\n      );\r\n      if (movieCount) {\r\n        return colorScale(movieCount);\r\n      }\r\n      return defaultCountryFillColor;\r\n    })\r\n    .attr(\r\n      \"stroke\",\r\n      d =>\r\n        countriesChosen.includes(codeNumericToLetter.get(d.id))\r\n          ? \"#444444\"\r\n          : \"blue\"\r\n    )\r\n    .attr(\r\n      \"stroke-width\",\r\n      d =>\r\n        countriesChosen.includes(codeNumericToLetter.get(d.id)) ? \"1px\" : \"0\"\r\n    );\r\n\r\n  // Tooltips and click actions\r\n  d3.select(\"#worldMap\").on(\"click\", () => {\r\n    if (d3.event.target.id === \"worldMap\") {\r\n      // clear countries selected\r\n      countriesChosen = [];\r\n      refreshPlots({\r\n        years: yearsChosen,\r\n        countries: countriesChosen,\r\n        genres: genresChosen\r\n      });\r\n    }\r\n  });\r\n\r\n  const tooltip = d3.select(\".tooltip\");\r\n  d3.select(\"#worldMap\")\r\n    .selectAll(\".country\")\r\n    .on(\"mousemove\", handleMouseOver)\r\n    .on(\"mouseout\", handleMouseOut)\r\n    .on(\"click\", d => {\r\n      const countryName = codeNumericToLetter.get(d.id);\r\n      // Add country to the list of chosen ones if shift was pressed\r\n      if (d3.event.shiftKey) {\r\n        if (countriesChosen.includes(countryName)) {\r\n          countriesChosen = countriesChosen.filter(\r\n            entry => entry !== countryName\r\n          );\r\n        } else {\r\n          countriesChosen.push(countryName);\r\n        }\r\n      }\r\n      // Country was the only one chosen\r\n      else if (\r\n        JSON.stringify(countriesChosen) === JSON.stringify([countryName])\r\n      ) {\r\n        countriesChosen = [];\r\n      }\r\n      // Multiple or no countries were chosen\r\n      else {\r\n        countriesChosen = [countryName];\r\n      }\r\n      refreshPlots({\r\n        years: yearsChosen,\r\n        countries: countriesChosen,\r\n        genres: genresChosen\r\n      });\r\n    });\r\n\r\n  function handleMouseOver(d) {\r\n    const coords = d3.mouse(this);\r\n    tooltip\r\n      .style(\"opacity\", 1)\r\n      .text(codeNumericToName.get(d.id))\r\n      .style(\r\n        \"left\",\r\n        `${coords[0] -\r\n          tooltip.node().offsetWidth / 2 +\r\n          document.getElementById(\"worldMap\").getBoundingClientRect().x}px`\r\n      )\r\n      .style(\r\n        \"top\",\r\n        `${coords[1] -\r\n          35 +\r\n          document.getElementById(\"worldMap\").getBoundingClientRect().y +\r\n          window.pageYOffset}px`\r\n      );\r\n  }\r\n  function handleMouseOut() {\r\n    tooltip.style(\"opacity\", 0);\r\n  }\r\n\r\n  addLabel(d3.select(\"#worldMap\"), \"Number of movies per country\");\r\n  addNote(\r\n    d3.select(\"#worldMap\"),\r\n    \"(click to filter by country, shift+click to select multiple countries)\"\r\n  );\r\n\r\n  // Color legend (gradient)\r\n  const legendWidth = svgWidth * 0.8;\r\n  const legendHeight = 50;\r\n\r\n  await d3\r\n    .select(\"#worldMap\")\r\n    .selectAll(\"g\")\r\n    .remove();\r\n\r\n  const legend = d3\r\n    .select(\"#worldMap\")\r\n    .append(\"defs\")\r\n    .attr(\"width\", legendWidth)\r\n    .attr(\"height\", legendHeight)\r\n    .append(\"svg:linearGradient\")\r\n    .attr(\"id\", \"gradient\")\r\n    .attr(\"x1\", \"0%\")\r\n    .attr(\"y1\", \"100%\")\r\n    .attr(\"x2\", \"100%\")\r\n    .attr(\"y2\", \"100%\")\r\n    .attr(\"spreadMethod\", \"pad\");\r\n\r\n  legend\r\n    .append(\"stop\")\r\n    .attr(\"offset\", \"0%\")\r\n    .attr(\"stop-color\", colorbrewer.Blues[5][1])\r\n    .attr(\"stop-opacity\", 1);\r\n\r\n  legend\r\n    .append(\"stop\")\r\n    .attr(\"offset\", \"33%\")\r\n    .attr(\"stop-color\", colorbrewer.Blues[5][2])\r\n    .attr(\"stop-opacity\", 1);\r\n\r\n  legend\r\n    .append(\"stop\")\r\n    .attr(\"offset\", \"66%\")\r\n    .attr(\"stop-color\", colorbrewer.Blues[5][3])\r\n    .attr(\"stop-opacity\", 1);\r\n\r\n  legend\r\n    .append(\"stop\")\r\n    .attr(\"offset\", \"100%\")\r\n    .attr(\"stop-color\", colorbrewer.Blues[5][4])\r\n    .attr(\"stop-opacity\", 1);\r\n\r\n  d3.select(\"#worldMap\")\r\n    .append(\"rect\")\r\n    .attr(\"width\", legendWidth)\r\n    .attr(\"height\", legendHeight - 30)\r\n    .attr(\"x\", `${svgWidth * 0.1}px`)\r\n    .attr(\"y\", `${svgHeight * 0.95}px`)\r\n    .style(\"fill\", \"url(#gradient)\");\r\n\r\n  const y = d3\r\n    .scaleLinear()\r\n    .range([0, legendWidth])\r\n    .domain(d3.extent(Array.from(countryCodeToMovieCount.values())));\r\n\r\n  const yAxis = d3\r\n    .axisBottom()\r\n    .scale(y)\r\n    .ticks(5);\r\n\r\n  d3.select(\"#worldMap\")\r\n    .append(\"g\")\r\n    .attr(\"class\", \"y axis\")\r\n    .attr(\"transform\", `translate(${svgWidth * 0.1}, ${svgHeight * 0.95})`)\r\n    .call(yAxis);\r\n} // drawMap\r\n\r\nfunction drawBarChart({ data }) {\r\n  const barChart = d3.select(\"#barChart\");\r\n\r\n  // Number of movies per genre\r\n  const genreToMovieCount = new Map();\r\n  data.forEach(genre => genreToMovieCount.set(genre._id, genre.count));\r\n  const genreData = Array.from(genreToMovieCount.entries()).sort(\r\n    (a, b) => b[1] - a[1]\r\n  );\r\n\r\n  const barPadding = 3;\r\n  const barWidth = Math.min(\r\n    (svgWidth - padding * 2) / Array.from(genreToMovieCount.values()).length -\r\n      barPadding,\r\n    svgWidth / 10\r\n  );\r\n  const bars = barChart\r\n    .attr(\"width\", svgWidth)\r\n    .attr(\"height\", svgHeight)\r\n    .selectAll(\".bar\")\r\n    .data(genreData, d => d[0]);\r\n\r\n  const barLabels = barChart.selectAll(\".barLabel\").data(genreData, d => d[0]);\r\n\r\n  if (data.length === 0) {\r\n    barLabels.remove();\r\n    bars.remove();\r\n    barChart.selectAll(\"g\").remove();\r\n    barChart.selectAll(\"rect\").remove();\r\n    barChart.selectAll(\"text\").remove();\r\n\r\n    barChart\r\n      .append(\"text\")\r\n      .attr(\"class\", \"placeholder\")\r\n      .text(\"No data points to display\")\r\n      .attr(\"x\", svgWidth / 2)\r\n      .attr(\"y\", svgHeight / 2)\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"font-weight\", 700);\r\n    return;\r\n  }\r\n\r\n  const paddingBottom = 10;\r\n  const yScale = d3\r\n    .scaleLinear()\r\n    .domain([0, d3.max(genreData, d => d[1])])\r\n    .range([svgHeight, paddingBottom + padding]);\r\n\r\n  const yAxis = d3\r\n    .axisLeft(yScale)\r\n    .tickSize(padding / 3)\r\n    .tickFormat(e => (Math.floor(e) === e ? e : undefined));\r\n  // .tickSizeOuter(0);\r\n\r\n  barLabels.exit().remove();\r\n  bars.exit().remove();\r\n  barChart.selectAll(\"g\").remove();\r\n  barChart.selectAll(\".placeholder\").remove();\r\n\r\n  // Bars\r\n  bars\r\n    .enter()\r\n    .append(\"rect\")\r\n    .attr(\"class\", \"bar\")\r\n    .merge(bars)\r\n    .attr(\"x\", (d, i) => padding + (barWidth + barPadding) * i)\r\n    .attr(\"y\", d => yScale(d[1]) - paddingBottom)\r\n    .attr(\"height\", d => svgHeight - yScale(d[1]))\r\n    .attr(\"width\", barWidth)\r\n    .attr(\"fill\", \"#4B80B7\")\r\n    .attr(\"opacity\", 0.5)\r\n    .on(\"click\", d => handleClick(d[0]))\r\n    .attr(\"stroke\", d => (genresChosen.includes(d[0]) ? \"#222222\" : \"blue\"))\r\n    .attr(\"stroke-width\", d => (genresChosen.includes(d[0]) ? \"2px\" : \"0\"));\r\n\r\n  function handleClick(genreName) {\r\n    if (d3.event.shiftKey) {\r\n      if (genresChosen.includes(genreName)) {\r\n        genresChosen = genresChosen.filter(entry => entry !== genreName);\r\n      } else {\r\n        genresChosen.push(genreName);\r\n      }\r\n    }\r\n    // Genre was the only one chosen\r\n    else if (JSON.stringify(genresChosen) === JSON.stringify([genreName])) {\r\n      genresChosen = [];\r\n    }\r\n    // Multiple or no genres were chosen\r\n    else {\r\n      genresChosen = [genreName];\r\n    }\r\n    refreshPlots({\r\n      years: yearsChosen,\r\n      countries: countriesChosen,\r\n      genres: genresChosen\r\n    });\r\n  }\r\n\r\n  // Clear selected genres list on empty space click\r\n  barChart.on(\"click\", () => {\r\n    if (d3.event.target.id === \"barChart\") {\r\n      // clear countries selected\r\n      genresChosen = [];\r\n      refreshPlots({\r\n        years: yearsChosen,\r\n        countries: countriesChosen,\r\n        genres: genresChosen\r\n      });\r\n    }\r\n  });\r\n\r\n  // Bar labels\r\n  barLabels\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"class\", \"barLabel\")\r\n    .merge(barLabels)\r\n    .text(d => d[0])\r\n    .attr(\"y\", (d, i) => padding + (barWidth + barPadding) * i + barWidth / 1.5)\r\n    .attr(\"x\", -svgHeight + paddingBottom * 2)\r\n    .on(\"click\", d => handleClick(d[0]));\r\n\r\n  addLabel(barChart, \"Number of movies per genre\");\r\n  addNote(\r\n    barChart,\r\n    \"(click to filter by genre, shift+click to select multiple genres)\"\r\n  );\r\n\r\n  // Left axis\r\n  barChart\r\n    .append(\"g\")\r\n    .call(yAxis)\r\n    .attr(\"transform\", `translate (${padding}, ${-paddingBottom})`);\r\n} // drawBarChart\r\n\r\nfunction addLabel(selection, labelText) {\r\n  selection\r\n    .append(\"text\")\r\n    .attr(\"class\", \"plotLabel\")\r\n    .text(labelText)\r\n    .attr(\"x\", svgWidth / 2)\r\n    .attr(\"y\", 0)\r\n    .attr(\"dy\", \"0.75em\")\r\n    .attr(\"font-size\", \"1.2em\")\r\n    .attr(\"text-anchor\", \"middle\");\r\n}\r\n\r\nfunction addNote(selection, noteText) {\r\n  selection\r\n    .append(\"text\")\r\n    .text(noteText)\r\n    .attr(\"x\", svgWidth / 2)\r\n    .attr(\"y\", 0)\r\n    .attr(\"dy\", \"2.4em\")\r\n    .attr(\"font-size\", \"0.7em\")\r\n    .attr(\"text-anchor\", \"middle\");\r\n}\r\n\r\nasync function displayMovieInfo(id) {\r\n  const movie = await getMovieDetails(id);\r\n  const budget = movie.budget\r\n    .toLocaleString(\"en-US\", { style: \"currency\", currency: \"USD\" })\r\n    .slice(0, -3);\r\n  const runTime =\r\n    movie.runtime < 60\r\n      ? `${movie.runtime} min`\r\n      : `${Math.floor(movie.runtime / 60)} hr ${movie.runtime % 60} min`;\r\n  let countries = \"\";\r\n  movie.productionCountries.forEach(country => {\r\n    countries += `${country.name}, `;\r\n  });\r\n  if (movie.productionCountries.length > 1) {\r\n    countries = `Production countries: ${countries}`;\r\n  } else {\r\n    countries = `Production country: ${countries}`;\r\n  }\r\n  // get rid or comma and space after the last country\r\n  countries = countries.slice(0, -2).replace(\"United States of America\", \"USA\");\r\n\r\n  const rating =\r\n    typeof movie.voteAverage === \"object\"\r\n      ? +movie.voteAverage.$numberDouble\r\n      : movie.voteAverage;\r\n  const htmlString = `\r\n  <img style=\"display: block; float:left; margin: 1%; height: auto; width: 256px;\" src=\"${imgBaseUrlLarge +\r\n    movie.posterPath}\" alt=\"Image poster not found\" />\r\n  <h4 style=\"text-align: center\">${movie.title}</h4>\r\n  <h5>Year: ${movie.releaseYear}<br>\r\n  ${countries}<br>\r\n  Budget: ${budget}<br>\r\n  Runtime: ${runTime}<br>\r\n  Average rating: ${rating}</h5>\r\n  <p>${movie.overview}</p>\r\n  `;\r\n  d3.select(\"#movieInfo\")\r\n    .html(htmlString)\r\n    .style(\"width\", `${svgWidth}px`);\r\n} // displayMovieInfo\r\n\r\nmodule.exports = { getListOfYearsFromDB, displayMovieInfo };\r\nwindow.displayMovieInfo = displayMovieInfo;\r\n"]}